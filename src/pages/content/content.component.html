
<div class="animate-fade-in">
  <div class="mb-8">
    <app-page-header
      [title]="topicName()"
      subtitle="Select content to view"
      [backLink]="backLink"
      backText="Back to Topics">
    </app-page-header>
    
    <div class="flex items-center justify-between">
        <div>
            <div class="flex items-center space-x-4 mt-2">
                <span class="text-sm text-gray-400">{{ filteredContent().length }} {{ filter() === 'video' ? 'Videos' : 'PDFs' }} Found</span>
            </div>
        </div>
        <div class="relative flex space-x-2 p-1 bg-black/20 border border-white/10 rounded-full">
            <button (click)="setFilter('video')" 
                    [class.active]="filter() === 'video'"
                    class="content-filter-btn z-10">
              <i class="fas fa-play mr-2"></i> Videos
            </button>
            <button (click)="setFilter('pdf')" 
                    [class.active]="filter() === 'pdf'"
                    class="content-filter-btn z-10">
              <i class="fas fa-file-pdf mr-2"></i> Notes
            </button>
            <div class="absolute h-[80%] top-[10%] bg-purple-600 rounded-full transition-all duration-300 ease-in-out"
                 [style.width]="filter() === 'video' ? '106px' : '98px'"
                 [style.transform]="filter() === 'video' ? 'translateX(0)' : 'translateX(106px)'">
            </div>
        </div>
    </div>
  </div>
  
  @if (isLoading()) {
     <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6">
       @for (item of [1,2,3,4,5,6]; track item) {
        <div class="h-24 bg-white/5 rounded-2xl relative overflow-hidden skeleton-shimmer"></div>
      }
    </div>
  } @else {
    @if (filteredContent().length > 0) {
      <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6">
        @for (item of filteredContent(); track item.id) {
          @if (filter() === 'video') {
            <div (click)="promptQuality(item.id, item.Title)"
                 class="group bg-gray-900/50 backdrop-blur-xl border border-white/10 rounded-2xl p-6 flex items-center space-x-4 hover:border-purple-500 hover:-translate-y-1 transition-all duration-300 cursor-pointer hover:shadow-2xl hover:shadow-purple-500/10">
              <div class="w-12 h-12 rounded-xl bg-gradient-to-br from-purple-500/20 to-transparent flex items-center justify-center text-2xl text-purple-300">
                <i class="fas fa-play"></i>
              </div>
              <div class="flex-1">
                <h4 class="font-bold text-white line-clamp-2">{{ item.Title || 'Untitled Video' }}</h4>
              </div>
            </div>
          } @else {
            <div (click)="openPdf(item)"
                 class="group bg-gray-900/50 backdrop-blur-xl border border-white/10 rounded-2xl p-6 flex items-center space-x-4 hover:border-rose-500 hover:-translate-y-1 transition-all duration-300 cursor-pointer hover:shadow-2xl hover:shadow-rose-500/10">
              <div class="w-12 h-12 rounded-xl bg-gradient-to-br from-rose-500/20 to-transparent flex items-center justify-center text-2xl text-rose-300">
                <i class="fas fa-file-pdf"></i>
              </div>
              <div class="flex-1">
                <h4 class="font-bold text-white line-clamp-2">{{ item.Title || 'Untitled PDF' }}</h4>
              </div>
            </div>
          }
        }
      </div>
    } @else {
      <div class="text-center py-16 text-gray-500">
        <i class="fas fa-file-excel text-5xl mb-4"></i>
        <h4 class="text-lg font-medium">No {{ filter() }} content available</h4>
      </div>
    }
  }
</div>
<style>
@keyframes fade-in { 
  from { opacity: 0; transform: translateY(20px); } 
  to { opacity: 1; transform: translateY(0); } 
}
.animate-fade-in { 
  animation: fade-in 0.6s cubic-bezier(0.215, 0.610, 0.355, 1.000) forwards;
}
.content-filter-btn {
    @apply px-6 py-2 rounded-full font-semibold transition-colors duration-300 text-gray-300;
}
.content-filter-btn.active {
    @apply text-white;
}
.skeleton-shimmer::after {
  content: '';
  position: absolute;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
  transform: translateX(-100%);
  background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.05), transparent);
  animation: shimmer 1.5s infinite;
}
@keyframes shimmer {
  100% {
    transform: translateX(100%);
  }
}
</style>
